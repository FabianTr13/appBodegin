(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"A+ca":function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),o=l("mrSG"),i=l("mCPD"),r=l("CtWq"),u=l("9Xff"),a=l("ZZ/e"),c=l("5JmO"),s=l.n(c),d=l("TruH"),f=l.n(d),p=l("t8sF"),h=l("wMzM");s.a.vfs=f.a.pdfMake.vfs;var m=function(){function n(n,e,l,t,i,r,u){var a=this;this.payPal1=n,this.Pro_pagos=e,this.storage=l,this.loadingController=t,this.file=i,this.fileOpener=r,this.plt=u,this.addScript=!1,this.monto="0",this.pagos={dias_restantes:0,historial:[]},this.es_movil=!1,this.isLoading=!1,this.pdfObj=null,this.paypalConfig={env:"sandbox",client:{sandbox:"AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_",production:"<your-production-key here>"},commit:!0,payment:function(n,e){return e.payment.create({payment:{transactions:[{amount:{total:a.monto,currency:"USD"}}]}})},onAuthorize:function(n,e){return e.payment.execute().then(function(n){return o.b(a,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.Pro_pagos.insertPago(n,n.id,this.monto)];case 1:return e.sent(),this.reload(),[2]}})})})}}}return n.prototype.ngOnInit=function(){this.reload(),this.es_movil=u.c},n.prototype.reload=function(){var n=this;this.present(),this.storage.get("token").then(function(e){n.Pro_pagos.getPagos(e).subscribe(function(e){return o.b(n,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return this.pagos=e,this.monto=e.monto,[4,this.dismiss()];case 1:return n.sent(),[2]}})})})})},n.prototype.pagar=function(){var n=this;this.payPal1.init({PayPalEnvironmentProduction:"YOUR_PRODUCTION_CLIENT_ID",PayPalEnvironmentSandbox:"AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_"}).then(function(){n.payPal1.prepareToRender("PayPalEnvironmentSandbox",new i.b({})).then(function(){var e=new i.c(n.monto,"USD","Description","sale");n.payPal1.renderSinglePaymentUI(e).then(function(e){return o.b(n,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return[4,this.Pro_pagos.insertPago(e,e.response.id,this.monto)];case 1:return n.sent(),this.reload(),[2]}})})},function(){})},function(){})},function(){})},n.prototype.ngAfterViewChecked=function(){var n=this;this.addScript||this.addPaypalScript().then(function(){paypal.Button.render(n.paypalConfig,"#paypal-checkout-btn")})},n.prototype.addPaypalScript=function(){return this.addScript=!0,new Promise(function(n,e){var l=document.createElement("script");l.src="https://www.paypalobjects.com/api/checkout.js",l.onload=n,document.body.appendChild(l)})},n.prototype.doRefresh=function(n){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.reload(),n.target.complete(),[2]})})},n.prototype.present=function(){return o.b(this,void 0,void 0,function(){var n=this;return o.e(this,function(e){switch(e.label){case 0:return this.isLoading=!0,[4,this.loadingController.create({duration:5e3}).then(function(e){e.present().then(function(){n.isLoading||e.dismiss().then(function(){})})})];case 1:return[2,e.sent()]}})})},n.prototype.dismiss=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return this.isLoading=!1,[4,this.loadingController.dismiss().then(function(){})];case 1:return[2,n.sent()]}})})},n.prototype.share=function(n){return o.b(this,void 0,void 0,function(){var e;return o.e(this,function(l){switch(l.label){case 0:return[4,this.Pro_pagos.getFactura(n)];case 1:return e=l.sent(),this.pdfObj=s.a.createPdf({content:[{text:"Factura",style:"header"},{text:e.bodegin_nombre,alignment:"center"},{text:"RTN: "+e.bodegin_rtn,alignment:"center"},{text:"CAI: "+e.cai,alignment:"center"},{text:"Direccion: "+e.bodegin_direccion,alignment:"center"},{text:"Telefono: "+e.bodegin_telefono,alignment:"center"},{text:"Fecha: "+e.fecha,alignment:"left"},{text:"Cliente:"+e.nombre_legal,style:"subheader"},{text:"RTN:"+e.rtn,style:"subheader"},{text:"Numero factura:"+e.numero_factura,style:"subheader"},{text:"Detalle",style:"subheader"},{text:"",style:"story",margin:[0,20,0,20]},{layout:"lightHorizontalLines",table:{headerRows:1,widths:["*","auto",100,"*"],body:[["Producto","Cant.","Precio Ant.","Total"],[e.descripcion,"1",e.monto,e.monto]]}}],styles:{header:{fontSize:18,bold:!0,alignment:"center"},subheader:{fontSize:14,bold:!0,margin:[0,15,0,0]},story:{italic:!0,alignment:"center",width:"50%"}}}),[2]}})})},n.prototype.downloadPdf=function(n){return o.b(this,void 0,void 0,function(){var e=this;return o.e(this,function(l){switch(l.label){case 0:return[4,this.share(n)];case 1:return l.sent(),this.plt.is("cordova")?this.pdfObj.getBuffer(function(n){var l=new Blob([n],{type:"application/pdf"});e.file.writeFile(e.file.dataDirectory,"mifactura.pdf",l,{replace:!0}).then(function(n){e.fileOpener.open(e.file.dataDirectory+"mifactura.pdf","application/pdf")})}):this.pdfObj.download(),[2]}})})},n}(),g=function(){return function(){}}(),b=l("pMnS"),R=l("oBZk"),y=l("Ip0R"),C=l("njMu"),v=l("+sC5"),w=l("ZYCi"),D=l("iw74"),x=t["\u0275crt"]({encapsulation:0,styles:[[".counter[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:green}.restante[_ngcontent-%COMP%]{font-size:.7rem}.historial[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700}.monto[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:green}.fecha_pago[_ngcontent-%COMP%]{font-size:.7rem}.id_pago[_ngcontent-%COMP%]{font-size:.9rem;color:#3880ff!important;font-weight:700}.row_historial[_ngcontent-%COMP%]{border-top:1px solid #b7b7b7}"]],data:{}});function P(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"ion-button",[["color","warning"],["expand","full"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.pagar()&&t),t},R.T,R.e)),t["\u0275did"](1,49152,null,0,a.l,[t.ChangeDetectorRef,t.ElementRef],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t["\u0275ted"](-1,0,["Pagar \xa0"])),(n()(),t["\u0275eld"](3,0,null,0,1,"ion-icon",[["color","success"],["name","ios-cash"]],null,null,null,R.gb,R.r)),t["\u0275did"](4,49152,null,0,a.D,[t.ChangeDetectorRef,t.ElementRef],{color:[0,"color"],name:[1,"name"]},null)],function(n,e){n(e,1,0,"warning","full"),n(e,4,0,"success","ios-cash")},null)}function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,14,"ion-row",[["class","row_historial"],["justify-content-center",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.downloadPdf(n.context.$implicit.id_pago)&&t),t},R.wb,R.H)),t["\u0275did"](1,49152,null,0,a.jb,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](2,0,null,0,7,"ion-col",[["align-self-center",""],["size-lg","3"],["size-md","5"],["size-xs","10"]],null,null,null,R.ab,R.l)),t["\u0275did"](3,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](4,0,null,0,5,"ion-label",[],null,null,null,R.nb,R.y)),t["\u0275did"](5,49152,null,0,a.O,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](6,0,null,0,1,"h2",[["class","id_pago"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",""])),(n()(),t["\u0275eld"](8,0,null,0,1,"h4",[["class","fecha_pago"]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["Fecha: ",""])),(n()(),t["\u0275eld"](10,0,null,0,4,"ion-col",[["align-self-center",""],["size-lg","1"],["size-md","1"],["size-xs","2"]],null,null,null,R.ab,R.l)),t["\u0275did"](11,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](12,0,null,0,2,"p",[["class","monto"]],null,null,null,null,null)),(n()(),t["\u0275ted"](13,null,["",""])),t["\u0275ppd"](14,4)],null,function(n,e){n(e,7,0,e.context.$implicit.id),n(e,9,0,e.context.$implicit.fecha);var l=t["\u0275unv"](e,13,0,n(e,14,0,t["\u0275nov"](e.parent,0),e.context.$implicit.monto,"USD",!0,"1.2"));n(e,13,0,l)})}function z(n){return t["\u0275vid"](0,[t["\u0275pid"](0,y.CurrencyPipe,[t.LOCALE_ID]),(n()(),t["\u0275eld"](1,0,null,null,1,"app-header-in",[["titulo","Pagos"]],null,null,null,C.b,C.a)),t["\u0275did"](2,114688,null,0,v.a,[w.m,t.ChangeDetectorRef],{titulo:[0,"titulo"]},null),(n()(),t["\u0275eld"](3,0,null,null,42,"ion-content",[],null,null,null,R.bb,R.m)),t["\u0275did"](4,49152,null,0,a.v,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](5,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,e,l){var t=!0;return"ionRefresh"===e&&(t=!1!==n.component.doRefresh(l)&&t),t},R.ub,R.E)),t["\u0275did"](6,49152,null,0,a.db,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](7,0,null,0,1,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["pullingText","Hale para recargar"],["refreshingSpinner","circles"],["refreshingText","Recargando..."]],null,null,null,R.tb,R.F)),t["\u0275did"](8,49152,null,0,a.eb,[t.ChangeDetectorRef,t.ElementRef],{pullingIcon:[0,"pullingIcon"],pullingText:[1,"pullingText"],refreshingSpinner:[2,"refreshingSpinner"],refreshingText:[3,"refreshingText"]},null),(n()(),t["\u0275eld"](9,0,null,0,36,"ion-grid",[],null,null,null,R.eb,R.p)),t["\u0275did"](10,49152,null,0,a.B,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](11,0,null,0,8,"ion-row",[["justify-content-center",""]],null,null,null,R.wb,R.H)),t["\u0275did"](12,49152,null,0,a.jb,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](13,0,null,0,4,"ion-col",[["align-self-center",""],["size-lg","2"],["size-md","2"],["size-xs","6"]],null,null,null,R.ab,R.l)),t["\u0275did"](14,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](15,0,null,0,2,"ion-label",[["class","restante"],["text-center",""]],null,null,null,R.nb,R.y)),t["\u0275did"](16,49152,null,0,a.O,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275ted"](-1,0,["Dias Restantes"])),(n()(),t["\u0275eld"](18,0,null,0,1,"ion-col",[["align-self-center",""],["size-lg","1"],["size-md","2"],["size-xs","5"]],null,null,null,R.ab,R.l)),t["\u0275did"](19,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](20,0,null,0,11,"ion-row",[["justify-content-center",""]],null,null,null,R.wb,R.H)),t["\u0275did"](21,49152,null,0,a.jb,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](22,0,null,0,4,"ion-col",[["align-self-center",""],["size-lg","1"],["size-md","2"],["size-xs","4"]],null,null,null,R.ab,R.l)),t["\u0275did"](23,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](24,0,null,0,2,"ion-label",[["class","counter"]],null,null,null,R.nb,R.y)),t["\u0275did"](25,49152,null,0,a.O,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275ted"](26,0,["",""])),(n()(),t["\u0275eld"](27,0,null,0,4,"ion-col",[["align-self-center",""],["size-lg","2"],["size-md","2"],["size-xs","6"]],null,null,null,R.ab,R.l)),t["\u0275did"](28,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,P)),t["\u0275did"](30,16384,null,0,y.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](31,0,null,0,0,"div",[["id","paypal-checkout-btn"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t["\u0275eld"](32,0,null,0,11,"ion-row",[["justify-content-center",""]],null,null,null,R.wb,R.H)),t["\u0275did"](33,49152,null,0,a.jb,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](34,0,null,0,9,"ion-col",[["align-self-center",""],["size-lg","4"],["size-md","6"],["size-xs","12"]],null,null,null,R.ab,R.l)),t["\u0275did"](35,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](36,0,null,0,7,"ion-item",[["color","primary"]],null,null,null,R.mb,R.u)),t["\u0275did"](37,49152,null,0,a.I,[t.ChangeDetectorRef,t.ElementRef],{color:[0,"color"]},null),(n()(),t["\u0275eld"](38,0,null,0,3,"ion-item",[["color","primary"]],null,null,null,R.mb,R.u)),t["\u0275did"](39,49152,null,0,a.I,[t.ChangeDetectorRef,t.ElementRef],{color:[0,"color"]},null),(n()(),t["\u0275eld"](40,0,null,0,1,"p",[["class","historial"],["slot","end"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Historial de facturas"])),(n()(),t["\u0275eld"](42,0,null,0,1,"ion-icon",[["name","list-box"],["slot","end"]],null,null,null,R.gb,R.r)),t["\u0275did"](43,49152,null,0,a.D,[t.ChangeDetectorRef,t.ElementRef],{name:[0,"name"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,_)),t["\u0275did"](45,278528,null,0,y.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,2,0,"Pagos"),n(e,8,0,"arrow-dropdown","Hale para recargar","circles","Recargando..."),n(e,30,0,l.es_movil),n(e,37,0,"primary"),n(e,39,0,"primary"),n(e,43,0,"list-box"),n(e,45,0,l.pagos.historial)},function(n,e){var l=e.component;n(e,26,0,l.pagos.dias_restantes),n(e,31,0,l.es_movil)})}function E(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-pagos",[],null,null,null,z,x)),t["\u0275did"](1,8503296,null,0,m,[i.a,r.a,D.b,a.Gb,p.a,h.a,a.Jb],null,null)],function(n,e){n(e,1,0)},null)}var O=t["\u0275ccf"]("app-pagos",m,E,{},{},[]),M=l("gIcY"),I=l("HsBR"),T=l("j1ZV");l.d(e,"PagosPageModuleNgFactory",function(){return k});var k=t["\u0275cmf"](g,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[b.a,O]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,y.NgLocalization,y.NgLocaleLocalization,[t.LOCALE_ID,[2,y["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,M.p,M.p,[]),t["\u0275mpd"](4608,a.c,a.c,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,a.Hb,a.Hb,[a.c,t.ComponentFactoryResolver,t.Injector,y.DOCUMENT]),t["\u0275mpd"](4608,a.Kb,a.Kb,[a.c,t.ComponentFactoryResolver,t.Injector,y.DOCUMENT]),t["\u0275mpd"](1073742336,y.CommonModule,y.CommonModule,[]),t["\u0275mpd"](1073742336,M.n,M.n,[]),t["\u0275mpd"](1073742336,M.b,M.b,[]),t["\u0275mpd"](1073742336,a.Eb,a.Eb,[]),t["\u0275mpd"](1073742336,I.a,I.a,[]),t["\u0275mpd"](1073742336,T.a,T.a,[]),t["\u0275mpd"](1073742336,w.o,w.o,[[2,w.u],[2,w.m]]),t["\u0275mpd"](1073742336,g,g,[]),t["\u0275mpd"](1024,w.k,function(){return[[{path:"",component:m}]]},[])])})}}]);