{"version":3,"sources":["webpack:///./src/app/Pages/reset-pass/reset-pass.module.ts","webpack:///./src/app/Pages/reset-pass/reset-pass.page.html","webpack:///./src/app/Pages/reset-pass/reset-pass.page.scss","webpack:///./src/app/Pages/reset-pass/reset-pass.page.ts"],"names":[],"mappings":"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","file":"Pages-reset-pass-reset-pass-module.js","sourcesContent":["import { ComponentsModule } from '../../components/components.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { RecaptchaModule } from 'ng-recaptcha';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ResetPassPage } from './reset-pass.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ResetPassPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    RecaptchaModule.forRoot(),\r\n    ComponentsModule\r\n  ],\r\n  exports: [\r\n         RecaptchaModule\r\n      ],\r\n  declarations: [ResetPassPage]\r\n})\r\nexport class ResetPassPageModule {}\r\n","module.exports = \"<app-header-in></app-header-in>\\r\\n<ion-content padding>\\r\\n  <ion-text class=\\\"ion-text-center\\\"color=\\\"dark\\\">\\r\\n    <h3>Restablece tu contraseña</h3>\\r\\n  </ion-text>\\r\\n  <div text-center [hidden]=\\\"!usuario\\\">\\r\\n    <ion-avatar class=\\\"avatar\\\">\\r\\n      <img [src]=\\\"logo\\\">\\r\\n    </ion-avatar>\\r\\n    <h3>Bienvenido: {{usuario}}</h3>\\r\\n  </div>\\r\\n  <form #form=\\\"ngForm\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row justify-content-center>\\r\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"floating\\\">Telefono</ion-label>\\r\\n            <ion-input name=\\\"celular\\\" maxlength=\\\"8\\\" minlength=\\\"8\\\" type=\\\"tel\\\" pattern=\\\"\\\\d*\\\" ngModel required></ion-input>\\r\\n          </ion-item>\\r\\n          <ion-item *ngIf=\\\"celularConfirmado\\\">\\r\\n            <ion-label position=\\\"floating\\\">Codigo</ion-label>\\r\\n            <ion-input name=\\\"codigo\\\" type=\\\"text\\\" placeholder=\\\"Codigo\\\" ngModel required></ion-input>\\r\\n          </ion-item>\\r\\n          <ion-item *ngIf=\\\"codigoConfirmado\\\">\\r\\n            <ion-label position=\\\"floating\\\">Nueva Contraseña</ion-label>\\r\\n            <ion-input name=\\\"nuevaPass\\\" type=\\\"password\\\" minlength=\\\"8\\\" placeholder=\\\"Nueva Contraseña\\\" ngModel required></ion-input>\\r\\n          </ion-item>\\r\\n          <ion-item *ngIf=\\\"codigoConfirmado\\\">\\r\\n            <ion-label position=\\\"floating\\\">Nueva Contraseña</ion-label>\\r\\n            <ion-input name=\\\"nuevaPassC\\\" type=\\\"password\\\" minlength=\\\"8\\\" placeholder=\\\"Nueva Contraseña\\\" ngModel required></ion-input>\\r\\n          </ion-item>\\r\\n          <div padding>\\r\\n            <re-captcha [hidden]=\\\"captchaPassed\\\" (resolved)=\\\"captchaResolved($event)\\\" siteKey=\\\"6Lf1160UAAAAAAJEp0oDnFN1jnQURXzUUYyzmPcG\\\"></re-captcha>\\r\\n            <ion-button (click)=\\\"botonAvance(form)\\\"\\r\\n                        disabled=\\\"{{form.invalid  ||  !this.captchaPassed}}\\\"\\r\\n                        size=\\\"large\\\"\\r\\n                        expand=\\\"block\\\"><ion-ripple-effect></ion-ripple-effect>{{ textBoton }}</ion-button>\\r\\n          </div>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n    </form>\\r\\n</ion-content>\\r\\n\"","module.exports = \"ion-item {\\n  --color: #3880ff; }\\n\\n.avatar {\\n  margin: auto; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUGFnZXMvcmVzZXQtcGFzcy9DOlxcVXNlcnNcXEZhYmlhblxcRG9jdW1lbnRzXFxib2RlZ2luXFxhcHBCb2RlZ2luL3NyY1xcYXBwXFxQYWdlc1xccmVzZXQtcGFzc1xccmVzZXQtcGFzcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBUSxFQUFBOztBQUVaO0VBQ0csWUFBWSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvUGFnZXMvcmVzZXQtcGFzcy9yZXNldC1wYXNzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pdGVte1xyXG4gICAgLS1jb2xvcjogIzM4ODBmZjtcclxufVxyXG4uYXZhdGFye1xyXG4gICBtYXJnaW46IGF1dG87XHJcbn1cclxuIl19 */\"","import { UserService } from '../../Services/user.service';\r\nimport { Component, OnInit, NgZone } from '@angular/core';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n@Component({\r\n  selector: 'app-reset-pass',\r\n  templateUrl: './reset-pass.page.html',\r\n  styleUrls: ['./reset-pass.page.scss'],\r\n})\r\nexport class ResetPassPage implements OnInit {\r\n\r\n  constructor(private Pro_user:UserService,\r\n              public loadingController: LoadingController,\r\n              public toastController: ToastController,\r\n              private Pro_router:Router,\r\n              private storage: Storage,\r\n              private zone: NgZone) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  celularConfirmado = false\r\n  codigoConfirmado = false\r\n  textBoton = \"Siguiente\"\r\n  codigoEnviado = null\r\n  id_usuario: null\r\n  isLoading = false\r\n  usuario = null\r\n  logo = \"assets/img/splash.png\"\r\n  captchaPassed: boolean = false\r\n  captchaResponse: string\r\n\r\n\r\n  async botonAvance(p_valor){\r\n    await this.present()\r\n    if (!this.celularConfirmado) {\r\n      this.Pro_user.confirmarCelular(p_valor.form.value.celular).subscribe(async resp=>{\r\n        if (resp!=null) {\r\n            if (resp.codigo != null) {\r\n              this.codigoEnviado = resp.codigo\r\n              this.id_usuario = resp.id_usuario\r\n              this.celularConfirmado = true\r\n              this.usuario = resp.usuario\r\n              this.textBoton = \"Confirmar Codigo\"\r\n              console.log(this.codigoEnviado)\r\n              await this.dismiss()\r\n              await this.showToast('Te enviamos un mensaje de confirmacion', 4000)\r\n            }\r\n        }else{\r\n          await this.showToast('Celular no registrado', 5000)\r\n          await this.dismiss()\r\n        }\r\n      }, async err=>{\r\n        await this.dismiss()\r\n      })\r\n    }else if (this.celularConfirmado && !this.codigoConfirmado) {\r\n        if (p_valor.form.value.codigo == this.codigoEnviado) {\r\n          this.codigoConfirmado = true\r\n          this.textBoton = \"Cambiar Contraseña\"\r\n          await this.dismiss()\r\n        }else{\r\n          await this.dismiss()\r\n          await this.showToast('Verifica tu numero de celular', 4000)\r\n          this.celularConfirmado = false\r\n          this.textBoton = 'Siguiente'\r\n        }\r\n    }else if (this.celularConfirmado && this.codigoConfirmado) {\r\n      if (p_valor.form.value.nuevaPassC != null && p_valor.form.value.nuevaPass != null) {\r\n        if (p_valor.form.value.nuevaPassC == p_valor.form.value.nuevaPass) {\r\n          this.Pro_user.cambiarPassword(this.id_usuario, p_valor.form.value.nuevaPass).subscribe(async resp =>{\r\n            await this.login(p_valor.form.value.nuevaPass)\r\n            await this.dismiss()\r\n          }, async err=>{\r\n            await this.dismiss()\r\n          })\r\n        }else{\r\n          await this.showToast('Tus contraeñas no coinciden', 5000)\r\n          await this.dismiss()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async present() {\r\n    this.isLoading = true;\r\n    return await this.loadingController.create({\r\n      duration: 5000,\r\n    }).then(a => {\r\n      a.present().then(() => {\r\n        if (!this.isLoading) {\r\n          a.dismiss().then(() => console.log('abort presenting'));\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async dismiss() {\r\n    this.isLoading = false;\r\n    return await this.loadingController.dismiss().then(() => {});\r\n  }\r\n\r\n  async showToast(p_mensaje, p_duration=2000){\r\n    const toast = await this.toastController.create({\r\n      message: p_mensaje,\r\n      duration: p_duration\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async login(p_password){\r\n    await this.present()\r\n    this.Pro_user.login(this.usuario, p_password).subscribe(async resp=>{\r\n      if (resp!=null) {\r\n        if (resp.token) {\r\n          await this.storage.set('token',resp.token)\r\n          await this.dismiss()\r\n          this.Pro_router.navigate(['/home'])\r\n        }\r\n      }\r\n    }, async err=>{\r\n      await this.dismiss()\r\n    });\r\n  }\r\n\r\n  captchaResolved(response: string): void {\r\n        this.zone.run(() => {\r\n            this.captchaPassed = true;\r\n            this.captchaResponse = response;\r\n        });\r\n  }\r\n}\r\n"],"sourceRoot":""}