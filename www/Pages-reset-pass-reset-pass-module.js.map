{"version":3,"sources":["webpack:///./src/app/Pages/reset-pass/reset-pass.module.ts","webpack:///./src/app/Pages/reset-pass/reset-pass.page.html","webpack:///./src/app/Pages/reset-pass/reset-pass.page.scss","webpack:///./src/app/Pages/reset-pass/reset-pass.page.ts"],"names":[],"mappings":"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","file":"Pages-reset-pass-reset-pass-module.js","sourcesContent":["import { ComponentsModule } from '../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { RecaptchaModule } from 'ng-recaptcha';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ResetPassPage } from './reset-pass.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ResetPassPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    RecaptchaModule.forRoot(),\n    ComponentsModule\n  ],\n  exports: [\n         RecaptchaModule\n      ],\n  declarations: [ResetPassPage]\n})\nexport class ResetPassPageModule {}\n","module.exports = \"<app-header-in></app-header-in>\\n<ion-content padding>\\n  <ion-text class=\\\"ion-text-center\\\"color=\\\"dark\\\">\\n    <h3>Restablece tu contraseña</h3>\\n  </ion-text>\\n  <div text-center [hidden]=\\\"!usuario\\\">\\n    <ion-avatar class=\\\"avatar\\\">\\n      <img [src]=\\\"logo\\\">\\n    </ion-avatar>\\n    <h3>Bienvenido: {{usuario}}</h3>\\n  </div>\\n  <form #form=\\\"ngForm\\\">\\n    <ion-grid>\\n      <ion-row justify-content-center>\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Telefono</ion-label>\\n            <ion-input name=\\\"celular\\\" maxlength=\\\"8\\\" minlength=\\\"8\\\" type=\\\"tel\\\" pattern=\\\"\\\\d*\\\" ngModel required></ion-input>\\n          </ion-item>\\n          <ion-item *ngIf=\\\"celularConfirmado\\\">\\n            <ion-label position=\\\"floating\\\">Codigo</ion-label>\\n            <ion-input name=\\\"codigo\\\" type=\\\"text\\\" placeholder=\\\"Codigo\\\" ngModel required></ion-input>\\n          </ion-item>\\n          <ion-item *ngIf=\\\"codigoConfirmado\\\">\\n            <ion-label position=\\\"floating\\\">Nueva Contraseña</ion-label>\\n            <ion-input name=\\\"nuevaPass\\\" type=\\\"password\\\" minlength=\\\"8\\\" placeholder=\\\"Nueva Contraseña\\\" ngModel required></ion-input>\\n          </ion-item>\\n          <ion-item *ngIf=\\\"codigoConfirmado\\\">\\n            <ion-label position=\\\"floating\\\">Nueva Contraseña</ion-label>\\n            <ion-input name=\\\"nuevaPassC\\\" type=\\\"password\\\" minlength=\\\"8\\\" placeholder=\\\"Nueva Contraseña\\\" ngModel required></ion-input>\\n          </ion-item>\\n          <div padding>\\n            <re-captcha [hidden]=\\\"captchaPassed\\\" (resolved)=\\\"captchaResolved($event)\\\" siteKey=\\\"6Lf1160UAAAAAAJEp0oDnFN1jnQURXzUUYyzmPcG\\\"></re-captcha>\\n            <ion-button (click)=\\\"botonAvance(form)\\\"\\n                        disabled=\\\"{{form.invalid  ||  !this.captchaPassed}}\\\"\\n                        size=\\\"large\\\"\\n                        expand=\\\"block\\\"><ion-ripple-effect></ion-ripple-effect>{{ textBoton }}</ion-button>\\n          </div>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </form>\\n</ion-content>\\n\"","module.exports = \"ion-item {\\n  --color: #3880ff; }\\n\\n.avatar {\\n  margin: auto; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYWJpYW4vRG9jdW1lbnRzL2JvZGVnaW4vYXBwL3NyYy9hcHAvUGFnZXMvcmVzZXQtcGFzcy9yZXNldC1wYXNzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFRLEVBQUE7O0FBRVo7RUFDRyxZQUFZLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9QYWdlcy9yZXNldC1wYXNzL3Jlc2V0LXBhc3MucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWl0ZW17XG4gICAgLS1jb2xvcjogIzM4ODBmZjtcbn1cbi5hdmF0YXJ7XG4gICBtYXJnaW46IGF1dG87XG59XG4iXX0= */\"","import { UserService } from '../../Services/user.service';\nimport { Component, OnInit, NgZone } from '@angular/core';\nimport { LoadingController } from '@ionic/angular';\nimport { ToastController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { Storage } from '@ionic/storage';\n\n@Component({\n  selector: 'app-reset-pass',\n  templateUrl: './reset-pass.page.html',\n  styleUrls: ['./reset-pass.page.scss'],\n})\nexport class ResetPassPage implements OnInit {\n\n  constructor(private Pro_user:UserService,\n              public loadingController: LoadingController,\n              public toastController: ToastController,\n              private Pro_router:Router,\n              private storage: Storage,\n              private zone: NgZone) { }\n\n  ngOnInit() {\n  }\n  celularConfirmado = false\n  codigoConfirmado = false\n  textBoton = \"Siguiente\"\n  codigoEnviado = null\n  id_usuario: null\n  isLoading = false\n  usuario = null\n  logo = \"assets/img/splash.png\"\n  captchaPassed: boolean = false\n  captchaResponse: string\n\n\n  async botonAvance(p_valor){\n    await this.present()\n    if (!this.celularConfirmado) {\n      this.Pro_user.confirmarCelular(p_valor.form.value.celular).subscribe(async resp=>{\n        if (resp!=null) {\n            if (resp.codigo != null) {\n              this.codigoEnviado = resp.codigo\n              this.id_usuario = resp.id_usuario\n              this.celularConfirmado = true\n              this.usuario = resp.usuario\n              this.textBoton = \"Confirmar Codigo\"\n              console.log(this.codigoEnviado)\n              await this.dismiss()\n              await this.showToast('Te enviamos un mensaje de confirmacion', 4000)\n            }\n        }else{\n          await this.showToast('Celular no registrado', 5000)\n          await this.dismiss()\n        }\n      }, async err=>{\n        await this.dismiss()\n      })\n    }else if (this.celularConfirmado && !this.codigoConfirmado) {\n        if (p_valor.form.value.codigo == this.codigoEnviado) {\n          this.codigoConfirmado = true\n          this.textBoton = \"Cambiar Contraseña\"\n          await this.dismiss()\n        }else{\n          await this.dismiss()\n          await this.showToast('Verifica tu numero de celular', 4000)\n          this.celularConfirmado = false\n          this.textBoton = 'Siguiente'\n        }\n    }else if (this.celularConfirmado && this.codigoConfirmado) {\n      if (p_valor.form.value.nuevaPassC != null && p_valor.form.value.nuevaPass != null) {\n        if (p_valor.form.value.nuevaPassC == p_valor.form.value.nuevaPass) {\n          this.Pro_user.cambiarPassword(this.id_usuario, p_valor.form.value.nuevaPass).subscribe(async resp =>{\n            await this.login(p_valor.form.value.nuevaPass)\n            await this.dismiss()\n          }, async err=>{\n            await this.dismiss()\n          })\n        }else{\n          await this.showToast('Tus contraeñas no coinciden', 5000)\n          await this.dismiss()\n        }\n      }\n    }\n  }\n\n  async present() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      duration: 5000,\n    }).then(a => {\n      a.present().then(() => {\n        if (!this.isLoading) {\n          a.dismiss().then(() => console.log('abort presenting'));\n        }\n      });\n    });\n  }\n\n  async dismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => {});\n  }\n\n  async showToast(p_mensaje, p_duration=2000){\n    const toast = await this.toastController.create({\n      message: p_mensaje,\n      duration: p_duration\n    });\n    toast.present();\n  }\n\n  async login(p_password){\n    await this.present()\n    this.Pro_user.login(this.usuario, p_password).subscribe(async resp=>{\n      if (resp!=null) {\n        if (resp.token) {\n          await this.storage.set('token',resp.token)\n          await this.dismiss()\n          this.Pro_router.navigate(['/home'])\n        }\n      }\n    }, async err=>{\n      await this.dismiss()\n    });\n  }\n\n  captchaResolved(response: string): void {\n        this.zone.run(() => {\n            this.captchaPassed = true;\n            this.captchaResponse = response;\n        });\n  }\n}\n"],"sourceRoot":""}