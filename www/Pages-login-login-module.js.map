{"version":3,"sources":["webpack:///./src/app/Pages/login/login.module.ts","webpack:///./src/app/Pages/login/login.page.html","webpack:///./src/app/Pages/login/login.page.scss","webpack:///./src/app/Pages/login/login.page.ts"],"names":[],"mappings":"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","file":"Pages-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","module.exports = \"<ion-content color=\\\"primary\\\" padding>\\r\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row color=\\\"primary\\\" justify-content-center>\\r\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\r\\n          <div text-center>\\r\\n            <h3>Bienvenido</h3>\\r\\n            <ion-avatar class=\\\"avatar\\\">\\r\\n              <img src=\\\"assets/img/splash.png\\\">\\r\\n            </ion-avatar>\\r\\n          </div>\\r\\n\\r\\n          <div padding>\\r\\n            <ion-item>\\r\\n              <ion-input name=\\\"user\\\" type=\\\"text\\\" placeholder=\\\"Usuario\\\" [(ngModel)]=\\\"usuario\\\" required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-input name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"Contraseña\\\" ngModel required (keyup.enter)=\\\"login(form)\\\"></ion-input>\\r\\n            </ion-item>\\r\\n          </div>\\r\\n          <ion-label routerLink=\\\"/reset-pass\\\" class=\\\"label-font\\\" text-right>Olvidaste tu contraseña?</ion-label>\\r\\n          <div padding>\\r\\n            <ion-button class=\\\"button-aling\\\" size=\\\"large\\\" type=\\\"submit\\\" [disabled]=\\\"form.invalid\\\" expand=\\\"block\\\">Iniciar</ion-button>\\r\\n          </div>\\r\\n          <div class=\\\"padding-aling\\\">\\r\\n            <ion-button size=\\\"large\\\"\\r\\n                        expand=\\\"block\\\"\\r\\n                        routerLink=\\\"/register\\\">Registrarse<ion-ripple-effect></ion-ripple-effect></ion-button>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row color=\\\"primary\\\" justify-content-center *ngIf=\\\"is_app\\\">\\r\\n        <ion-col align-self-center size-md=\\\"1\\\" size-lg=\\\"1\\\" size-xs=\\\"2\\\">\\r\\n          <ion-icon name=\\\"finger-print\\\" class=\\\"icon-size\\\" (click)=\\\"loginFinger()\\\"></ion-icon>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","module.exports = \"ion-item {\\n  --background: #3880ff;\\n  --color: #fff; }\\n\\nion-button {\\n  --background: #062f77; }\\n\\n.button-aling {\\n  margin-top: 8px;\\n  padding-bottom: 0px !important; }\\n\\n.padding-aling {\\n  padding-top: 0px;\\n  padding-right: 16px;\\n  padding-left: 16px; }\\n\\n.avatar {\\n  margin: auto; }\\n\\n.icon-size {\\n  font-size: 64px;\\n  margin: auto; }\\n\\n.label-font {\\n  font-size: 0.9em;\\n  position: absolute;\\n  right: 0;\\n  border-bottom: 5px;\\n  cursor: pointer;\\n  text-decoration: underline;\\n  padding-right: 17px !important;\\n  padding-bottom: 5px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUGFnZXMvbG9naW4vQzpcXFVzZXJzXFxGYWJpYW5cXERvY3VtZW50c1xcYm9kZWdpblxcYXBwQm9kZWdpbi9zcmNcXGFwcFxcUGFnZXNcXGxvZ2luXFxsb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBYTtFQUNiLGFBQVEsRUFBQTs7QUFFWjtFQUNJLHFCQUFhLEVBQUE7O0FBRWpCO0VBQ0UsZUFBZTtFQUNmLDhCQUE4QixFQUFBOztBQUVoQztFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsa0JBQWtCLEVBQUE7O0FBRXBCO0VBQ0csWUFBWSxFQUFBOztBQUdmO0VBQ0UsZUFBZTtFQUNmLFlBQVksRUFBQTs7QUFHZDtFQUNFLGdCQUFnQjtFQUNoQixrQkFBaUI7RUFDakIsUUFBTztFQUNQLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsMEJBQTBCO0VBQzFCLDhCQUE4QjtFQUM5QixtQkFBbUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL1BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pdGVte1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjMzg4MGZmO1xyXG4gICAgLS1jb2xvcjogI2ZmZjtcclxufVxyXG5pb24tYnV0dG9ue1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjMDYyZjc3O1xyXG59XHJcbi5idXR0b24tYWxpbmd7XHJcbiAgbWFyZ2luLXRvcDogOHB4O1xyXG4gIHBhZGRpbmctYm90dG9tOiAwcHggIWltcG9ydGFudDtcclxufVxyXG4ucGFkZGluZy1hbGluZ3tcclxuICBwYWRkaW5nLXRvcDogMHB4O1xyXG4gIHBhZGRpbmctcmlnaHQ6IDE2cHg7XHJcbiAgcGFkZGluZy1sZWZ0OiAxNnB4O1xyXG59XHJcbi5hdmF0YXJ7XHJcbiAgIG1hcmdpbjogYXV0bztcclxufVxyXG5cclxuLmljb24tc2l6ZXtcclxuICBmb250LXNpemU6IDY0cHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59XHJcblxyXG4ubGFiZWwtZm9udCB7XHJcbiAgZm9udC1zaXplOiAwLjllbTtcclxuICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICByaWdodDowO1xyXG4gIGJvcmRlci1ib3R0b206IDVweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbiAgcGFkZGluZy1yaWdodDogMTdweCAhaW1wb3J0YW50O1xyXG4gIHBhZGRpbmctYm90dG9tOiA1cHg7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { NgForm }  from \"@angular/forms\";\r\nimport { UserService } from '../../Services/user.service';\r\nimport { Router } from '@angular/router';\r\nimport { Storage } from '@ionic/storage';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { Vibration } from '@ionic-native/vibration/ngx';\r\nimport { isApp } from '../../Config/configuration';\r\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio/ngx';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  constructor(private Pro_user:UserService,\r\n              private router: Router,\r\n              private storage: Storage,\r\n              public toastController: ToastController,\r\n              public loadingController: LoadingController,\r\n              private vibration: Vibration,\r\n              private faio: FingerprintAIO) {\r\n                this.storage.get('usuario').then(resp=>{\r\n                    this.usuario = resp\r\n                    this.storage.remove('usuario').then(rr=>{})\r\n                })\r\n              }\r\n\r\n  ngOnInit() {\r\n    this.is_app = isApp\r\n     setTimeout( async() => { await this.loginFinger() }, 2000);\r\n  }\r\n\r\n  isLoading = false;\r\n  usuario = null\r\n  is_app = null\r\n\r\n  async login(form:NgForm, kind = 1, p_finger = null){\r\n    let credential = {\r\n        user : kind == 1 ? form.form.value.user : p_finger.usuario,\r\n        pass : kind == 1 ? form.form.value.password : p_finger.password\r\n    }\r\n\r\n    await this.present()\r\n    let id_onesignal = await this.storage.get('id_onesignal')\r\n    this.Pro_user.login(credential.user, credential.pass, id_onesignal).subscribe(async resp=>{\r\n      if (resp!=null) {\r\n        if (resp.token) {\r\n          await this.storage.set('token',resp.token)\r\n          this.vibration.vibrate(500);\r\n          await this.dismiss()\r\n          this.router.navigate(['/home'])\r\n        }\r\n      }\r\n      else{\r\n        await this.dismiss()\r\n        await this.showToast('Credenciales no validas')\r\n      }\r\n    }, async err=>{\r\n      await this.dismiss()\r\n    });\r\n  }\r\n\r\n  async loginFinger(){\r\n    this.storage.get('finger').then(finger =>{\r\n      if (finger == 'on') {\r\n        this.faio.show({\r\n          clientId: 'FingerprintCredential',\r\n          clientSecret: 'o7aoOMYUbyxaD23oFAnJ',\r\n          disableBackup:true,\r\n      })\r\n      .then( async result => {\r\n        let finger = await this.Pro_user.loginFinger()\r\n        console.log(finger)\r\n        this.login(null, 2, finger)\r\n      })\r\n      .catch((error: any) => console.log(error));\r\n      }\r\n    })\r\n  }\r\n\r\n  async present() {\r\n    this.isLoading = true;\r\n    return await this.loadingController.create({\r\n      duration: 2000\r\n    }).then(a => {\r\n      a.present().then(() => {\r\n        if (!this.isLoading) {\r\n          a.dismiss().then(() => {});\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async showToast(p_mensaje, p_duration=2000){\r\n    const toast = await this.toastController.create({\r\n      message: p_mensaje,\r\n      duration: p_duration,\r\n      position: 'top',\r\n      showCloseButton: true,\r\n      closeButtonText: 'Cerrar'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async dismiss() {\r\n    this.isLoading = false;\r\n    return await this.loadingController.dismiss().then(() => {});\r\n  }\r\n}\r\n"],"sourceRoot":""}