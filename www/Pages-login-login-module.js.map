{"version":3,"sources":["webpack:///./src/app/Pages/login/login.module.ts","webpack:///./src/app/Pages/login/login.page.html","webpack:///./src/app/Pages/login/login.page.scss","webpack:///./src/app/Pages/login/login.page.ts"],"names":[],"mappings":"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","file":"Pages-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPage } from './login.page';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","module.exports = \"<ion-content color=\\\"primary\\\" padding>\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\">\\n    <ion-grid>\\n      <ion-row color=\\\"primary\\\" justify-content-center>\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\n          <div text-center>\\n            <h3>Bienvenido</h3>\\n            <ion-avatar class=\\\"avatar\\\">\\n              <img src=\\\"assets/img/splash.png\\\">\\n            </ion-avatar>\\n          </div>\\n\\n          <div padding>\\n            <ion-item>\\n              <ion-input name=\\\"user\\\" type=\\\"text\\\" placeholder=\\\"Usuario\\\" [(ngModel)]=\\\"usuario\\\" required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-input name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"Contraseña\\\" ngModel required (keyup.enter)=\\\"login(form)\\\"></ion-input>\\n            </ion-item>\\n          </div>\\n          <ion-label routerLink=\\\"/reset-pass\\\" class=\\\"label-font\\\" text-right>Olvidaste tu contraseña?</ion-label>\\n          <div padding>\\n            <ion-button class=\\\"button-aling\\\" size=\\\"large\\\" type=\\\"submit\\\" [disabled]=\\\"form.invalid\\\" expand=\\\"block\\\">Iniciar</ion-button>\\n          </div>\\n          <div class=\\\"padding-aling\\\">\\n            <ion-button size=\\\"large\\\"\\n                        expand=\\\"block\\\"\\n                        routerLink=\\\"/register\\\">Registrarse<ion-ripple-effect></ion-ripple-effect></ion-button>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row color=\\\"primary\\\" justify-content-center *ngIf=\\\"is_app\\\">\\n        <ion-col align-self-center size-md=\\\"1\\\" size-lg=\\\"1\\\" size-xs=\\\"2\\\">\\n          <ion-icon name=\\\"finger-print\\\" class=\\\"icon-size\\\" (click)=\\\"loginFinger()\\\"></ion-icon>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\\n\"","module.exports = \"ion-item {\\n  --background: #3880ff;\\n  --color: #fff; }\\n\\nion-button {\\n  --background: #062f77; }\\n\\n.button-aling {\\n  margin-top: 8px;\\n  padding-bottom: 0px !important; }\\n\\n.padding-aling {\\n  padding-top: 0px;\\n  padding-right: 16px;\\n  padding-left: 16px; }\\n\\n.avatar {\\n  margin: auto; }\\n\\n.icon-size {\\n  font-size: 64px;\\n  margin: auto; }\\n\\n.label-font {\\n  font-size: 0.9em;\\n  position: absolute;\\n  right: 0;\\n  border-bottom: 5px;\\n  cursor: pointer;\\n  text-decoration: underline;\\n  padding-right: 17px !important;\\n  padding-bottom: 5px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYWJpYW4vRG9jdW1lbnRzL2JvZGVnaW4vYXBwL3NyYy9hcHAvUGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kscUJBQWE7RUFDYixhQUFRLEVBQUE7O0FBRVo7RUFDSSxxQkFBYSxFQUFBOztBQUVqQjtFQUNFLGVBQWU7RUFDZiw4QkFBOEIsRUFBQTs7QUFFaEM7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGtCQUFrQixFQUFBOztBQUVwQjtFQUNHLFlBQVksRUFBQTs7QUFHZjtFQUNFLGVBQWU7RUFDZixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxnQkFBZ0I7RUFDaEIsa0JBQWlCO0VBQ2pCLFFBQU87RUFDUCxrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLDBCQUEwQjtFQUMxQiw4QkFBOEI7RUFDOUIsbUJBQW1CLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9QYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbXtcbiAgICAtLWJhY2tncm91bmQ6ICMzODgwZmY7XG4gICAgLS1jb2xvcjogI2ZmZjtcbn1cbmlvbi1idXR0b257XG4gICAgLS1iYWNrZ3JvdW5kOiAjMDYyZjc3O1xufVxuLmJ1dHRvbi1hbGluZ3tcbiAgbWFyZ2luLXRvcDogOHB4O1xuICBwYWRkaW5nLWJvdHRvbTogMHB4ICFpbXBvcnRhbnQ7XG59XG4ucGFkZGluZy1hbGluZ3tcbiAgcGFkZGluZy10b3A6IDBweDtcbiAgcGFkZGluZy1yaWdodDogMTZweDtcbiAgcGFkZGluZy1sZWZ0OiAxNnB4O1xufVxuLmF2YXRhcntcbiAgIG1hcmdpbjogYXV0bztcbn1cblxuLmljb24tc2l6ZXtcbiAgZm9udC1zaXplOiA2NHB4O1xuICBtYXJnaW46IGF1dG87XG59XG5cbi5sYWJlbC1mb250IHtcbiAgZm9udC1zaXplOiAwLjllbTtcbiAgcG9zaXRpb246YWJzb2x1dGU7XG4gIHJpZ2h0OjA7XG4gIGJvcmRlci1ib3R0b206IDVweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgcGFkZGluZy1yaWdodDogMTdweCAhaW1wb3J0YW50O1xuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xufVxuIl19 */\"","import { Component, OnInit } from '@angular/core';\nimport { NgForm }  from \"@angular/forms\";\nimport { UserService } from '../../Services/user.service';\nimport { Router } from '@angular/router';\nimport { Storage } from '@ionic/storage';\nimport { LoadingController } from '@ionic/angular';\nimport { ToastController } from '@ionic/angular';\nimport { Vibration } from '@ionic-native/vibration/ngx';\nimport { isApp } from '../../Config/configuration';\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio/ngx';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  constructor(private Pro_user:UserService,\n              private router: Router,\n              private storage: Storage,\n              public toastController: ToastController,\n              public loadingController: LoadingController,\n              private vibration: Vibration,\n              private faio: FingerprintAIO) {\n                this.storage.get('usuario').then(resp=>{\n                    this.usuario = resp\n                    this.storage.remove('usuario').then(rr=>{})\n                })\n              }\n\n  ngOnInit() {\n    this.is_app = isApp\n     setTimeout( async() => { await this.loginFinger() }, 2000);\n  }\n\n  isLoading = false;\n  usuario = null\n  is_app = null\n\n  async login(form:NgForm, kind = 1, p_finger = null){\n    let credential = {\n        user : kind == 1 ? form.form.value.user : p_finger.usuario,\n        pass : kind == 1 ? form.form.value.password : p_finger.password\n    }\n\n    await this.present()\n    let id_onesignal = await this.storage.get('id_onesignal')\n    this.Pro_user.login(credential.user, credential.pass, id_onesignal).subscribe(async resp=>{\n      if (resp!=null) {\n        if (resp.token) {\n          await this.storage.set('token',resp.token)\n          this.vibration.vibrate(500);\n          await this.dismiss()\n          this.router.navigate(['/home'])\n        }\n      }\n      else{\n        await this.dismiss()\n        await this.showToast('Credenciales no validas')\n      }\n    }, async err=>{\n      await this.dismiss()\n    });\n  }\n\n  async loginFinger(){\n    this.storage.get('finger').then(finger =>{\n      if (finger == 'on') {\n        this.faio.show({\n          clientId: 'FingerprintCredential',\n          clientSecret: 'o7aoOMYUbyxaD23oFAnJ',\n          disableBackup:true,\n      })\n      .then( async result => {\n        let finger = await this.Pro_user.loginFinger()\n        console.log(finger)\n        this.login(null, 2, finger)\n      })\n      .catch((error: any) => console.log(error));\n      }\n    })\n  }\n\n  async present() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      duration: 2000\n    }).then(a => {\n      a.present().then(() => {\n        if (!this.isLoading) {\n          a.dismiss().then(() => {});\n        }\n      });\n    });\n  }\n\n  async showToast(p_mensaje, p_duration=2000){\n    const toast = await this.toastController.create({\n      message: p_mensaje,\n      duration: p_duration,\n      position: 'top',\n      showCloseButton: true,\n      closeButtonText: 'Cerrar'\n    });\n    toast.present();\n  }\n\n  async dismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => {});\n  }\n}\n"],"sourceRoot":""}