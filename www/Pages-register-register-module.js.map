{"version":3,"sources":["webpack:///./src/app/Pages/register/register.module.ts","webpack:///./src/app/Pages/register/register.page.html","webpack:///./src/app/Pages/register/register.page.scss","webpack:///./src/app/Pages/register/register.page.ts"],"names":[],"mappings":"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","file":"Pages-register-register-module.js","sourcesContent":["import { ComponentsModule } from '../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { RecaptchaModule } from 'ng-recaptcha';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    RecaptchaModule.forRoot()\n  ],\n  exports: [\n       RecaptchaModule\n    ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","module.exports = \"<app-header-in></app-header-in>\\n<ion-content padding>\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"registrarUsuario(form)\\\">\\n    <ion-grid>\\n      <ion-row justify-content-center>\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\n          <div text-center>\\n            <h3>Bienvenido</h3>\\n            <ion-avatar class=\\\"avatar\\\">\\n              <img [src]=\\\"logo\\\">\\n            </ion-avatar>\\n          </div>\\n\\n          <div padding>\\n            <ion-item>\\n                <ion-label position=\\\"floating\\\">Nombre Comercial</ion-label>\\n              <ion-input name=\\\"nombreComercial\\\" type=\\\"text\\\"  ngModel required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Nombre legal</ion-label>\\n              <ion-input name=\\\"nombreLegal\\\" type=\\\"text\\\"  ngModel required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Rtn</ion-label>\\n              <ion-input name=\\\"rtn\\\" type=\\\"text\\\"  pattern=\\\"\\\\d*\\\"  ngModel required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Teléfono</ion-label>\\n              <ion-input name=\\\"phone\\\" maxlength=\\\"8\\\" minlength=\\\"8\\\" type=\\\"tel\\\" pattern=\\\"\\\\d*\\\" ngModel required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Dirección</ion-label>\\n              <ion-input name=\\\"direccion\\\" type=\\\"text\\\" ngModel></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Usuario</ion-label>\\n              <ion-input name=\\\"user\\\" type=\\\"text\\\"  ngModel required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Clave</ion-label>\\n              <ion-input name=\\\"password\\\" minlength=\\\"8\\\" type=\\\"password\\\"  ngModel required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Repetir Clave</ion-label>\\n              <ion-input name=\\\"passwordRepeat\\\" minlength=\\\"8\\\" type=\\\"password\\\" ngModel required></ion-input>\\n            </ion-item>\\n          </div>\\n          <div padding>\\n            <re-captcha (resolved)=\\\"captchaResolved($event)\\\" siteKey=\\\"6Lf1160UAAAAAAJEp0oDnFN1jnQURXzUUYyzmPcG\\\"></re-captcha>\\n            <ion-button size=\\\"large\\\" type=\\\"submit\\\" disabled=\\\"{{form.invalid  ||  !this.captchaPassed}}\\\" expand=\\\"block\\\">Registrar</ion-button>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\\n\"","module.exports = \"ion-item {\\n  --color: #3880ff; }\\n\\n.avatar {\\n  margin: auto; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYWJpYW4vRG9jdW1lbnRzL2JvZGVnaW4vYXBwL3NyYy9hcHAvUGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQVEsRUFBQTs7QUFFWjtFQUNHLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL1BhZ2VzL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pdGVte1xuICAgIC0tY29sb3I6ICMzODgwZmY7XG59XG4uYXZhdGFye1xuICAgbWFyZ2luOiBhdXRvO1xufVxuIl19 */\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport { ClientService } from '../../Services/client.service';\nimport { ToastController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { UserService } from '../../Services/user.service';\nimport { Storage } from '@ionic/storage';\nimport { LoadingController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n\n  constructor(private Pro_cliente:ClientService,\n              public toastController: ToastController,\n              private Pro_router:Router,\n              private Pro_user:UserService,\n              private storage: Storage,\n              public loadingController: LoadingController,\n              private zone: NgZone) { }\n\n  ngOnInit() {\n  }\n\n  logo = \"assets/img/splash.png\"\n  isLoading = false\n  captchaPassed: boolean = false\n  captchaResponse: string\n\n  async registrarUsuario(p_form){\n    if (p_form.form.value.password != p_form.form.value.passwordRepeat) {\n        await this.showToast('las contraseñas no coinciden', 3000)\n    }\n    else\n    {\n      await this.present()\n      this.Pro_cliente.validarNuevoCliente(p_form.form.value).subscribe(async resp=>{\n        if (resp!=null) {\n          if (resp==true) {\n            this.Pro_cliente.registraUsuario(p_form.form.value).subscribe(async data => {\n              let id_onesignal = await this.storage.get('id_onesignal')\n              this.Pro_user.login(p_form.form.value.user, p_form.form.value.password, id_onesignal).subscribe(async respAuth=>{\n                if (respAuth!=null) {\n                  if (respAuth.token) {\n                    await this.storage.set('token',respAuth.token)\n                    await this.dismiss()\n                    await this.login(p_form.form.value.user, p_form.form.value.password)\n                    await this.showToast('Bienvenido')\n                  }\n                }\n              });\n            }, async err=>{\n              await this.dismiss()\n            })\n          }else {\n              await this.showToast('El usuario ya existe')\n              await this.dismiss()\n          }\n        }\n        else{\n          await this.dismiss()\n        }\n      }, async err =>{\n        await this.dismiss()\n      });\n    }\n  }\n\n  async showToast(p_mensaje, p_duration=2000){\n    const toast = await this.toastController.create({\n      message: p_mensaje,\n      duration: p_duration\n    });\n    toast.present();\n  }\n\n  async present() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      duration: 5000,\n    }).then(a => {\n      a.present().then(() => {\n        if (!this.isLoading) {\n          a.dismiss().then(() => {});\n        }\n      });\n    });\n  }\n\n  async dismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => {});\n  }\n\n  async login(p_usuario, p_password){\n    await this.present()\n    let id_onesignal = await this.storage.get('id_onesignal')\n    this.Pro_user.login(p_usuario, p_password, id_onesignal).subscribe(async resp=>{\n      if (resp!=null) {\n        if (resp.token) {\n          await this.storage.set('token',resp.token)\n          await this.dismiss()\n          this.Pro_router.navigate(['/home'])\n        }\n      }\n    }, async err=>{\n      await this.dismiss()\n    });\n  }\n\n  captchaResolved(response: string): void {\n        this.zone.run(() => {\n            this.captchaPassed = true;\n            this.captchaResponse = response;\n        });\n  }\n\n  formValid(){\n\n  }\n}\n"],"sourceRoot":""}