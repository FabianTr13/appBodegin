{"version":3,"sources":["webpack:///./src/app/Pages/register/register.module.ts","webpack:///./src/app/Pages/register/register.page.html","webpack:///./src/app/Pages/register/register.page.scss","webpack:///./src/app/Pages/register/register.page.ts"],"names":[],"mappings":"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","file":"Pages-register-register-module.js","sourcesContent":["import { ComponentsModule } from '../../components/components.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { RecaptchaModule } from 'ng-recaptcha';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule,\r\n    RecaptchaModule.forRoot()\r\n  ],\r\n  exports: [\r\n       RecaptchaModule\r\n    ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","module.exports = \"<app-header-in></app-header-in>\\r\\n<ion-content padding>\\r\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"registrarUsuario(form)\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row justify-content-center>\\r\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\r\\n          <div text-center>\\r\\n            <h3>Bienvenido</h3>\\r\\n            <ion-avatar class=\\\"avatar\\\">\\r\\n              <img [src]=\\\"logo\\\">\\r\\n            </ion-avatar>\\r\\n          </div>\\r\\n\\r\\n          <div padding>\\r\\n            <ion-item>\\r\\n                <ion-label position=\\\"floating\\\">Nombre Comercial</ion-label>\\r\\n              <ion-input name=\\\"nombreComercial\\\" type=\\\"text\\\"  ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Nombre legal</ion-label>\\r\\n              <ion-input name=\\\"nombreLegal\\\" type=\\\"text\\\"  ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Rtn</ion-label>\\r\\n              <ion-input name=\\\"rtn\\\" type=\\\"text\\\"  pattern=\\\"\\\\d*\\\"  ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Teléfono</ion-label>\\r\\n              <ion-input name=\\\"phone\\\" maxlength=\\\"8\\\" minlength=\\\"8\\\" type=\\\"tel\\\" pattern=\\\"\\\\d*\\\" ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Dirección</ion-label>\\r\\n              <ion-input name=\\\"direccion\\\" type=\\\"text\\\" ngModel></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Usuario</ion-label>\\r\\n              <ion-input name=\\\"user\\\" type=\\\"text\\\"  ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Clave</ion-label>\\r\\n              <ion-input name=\\\"password\\\" minlength=\\\"8\\\" type=\\\"password\\\"  ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Repetir Clave</ion-label>\\r\\n              <ion-input name=\\\"passwordRepeat\\\" minlength=\\\"8\\\" type=\\\"password\\\" ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n          </div>\\r\\n          <div padding>\\r\\n            <re-captcha (resolved)=\\\"captchaResolved($event)\\\" siteKey=\\\"6Lf1160UAAAAAAJEp0oDnFN1jnQURXzUUYyzmPcG\\\"></re-captcha>\\r\\n            <ion-button size=\\\"large\\\" type=\\\"submit\\\" disabled=\\\"{{form.invalid  ||  !this.captchaPassed}}\\\" expand=\\\"block\\\">Registrar</ion-button>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","module.exports = \"ion-item {\\n  --color: #3880ff; }\\n\\n.avatar {\\n  margin: auto; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUGFnZXMvcmVnaXN0ZXIvQzpcXFVzZXJzXFxGYWJpYW5cXERvY3VtZW50c1xcYm9kZWdpblxcYXBwQm9kZWdpbi9zcmNcXGFwcFxcUGFnZXNcXHJlZ2lzdGVyXFxyZWdpc3Rlci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBUSxFQUFBOztBQUVaO0VBQ0csWUFBWSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvUGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWl0ZW17XHJcbiAgICAtLWNvbG9yOiAjMzg4MGZmO1xyXG59XHJcbi5hdmF0YXJ7XHJcbiAgIG1hcmdpbjogYXV0bztcclxufVxyXG4iXX0= */\"","import { Component, OnInit, NgZone } from '@angular/core';\r\nimport { ClientService } from '../../Services/client.service';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { UserService } from '../../Services/user.service';\r\nimport { Storage } from '@ionic/storage';\r\nimport { LoadingController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.page.html',\r\n  styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\n  constructor(private Pro_cliente:ClientService,\r\n              public toastController: ToastController,\r\n              private Pro_router:Router,\r\n              private Pro_user:UserService,\r\n              private storage: Storage,\r\n              public loadingController: LoadingController,\r\n              private zone: NgZone) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  logo = \"assets/img/splash.png\"\r\n  isLoading = false\r\n  captchaPassed: boolean = false\r\n  captchaResponse: string\r\n\r\n  async registrarUsuario(p_form){\r\n    if (p_form.form.value.password != p_form.form.value.passwordRepeat) {\r\n        await this.showToast('las contraseñas no coinciden', 3000)\r\n    }\r\n    else\r\n    {\r\n      await this.present()\r\n      this.Pro_cliente.validarNuevoCliente(p_form.form.value).subscribe(async resp=>{\r\n        if (resp!=null) {\r\n          if (resp==true) {\r\n            this.Pro_cliente.registraUsuario(p_form.form.value).subscribe(async data => {\r\n              let id_onesignal = await this.storage.get('id_onesignal')\r\n              this.Pro_user.login(p_form.form.value.user, p_form.form.value.password, id_onesignal).subscribe(async respAuth=>{\r\n                if (respAuth!=null) {\r\n                  if (respAuth.token) {\r\n                    await this.storage.set('token',respAuth.token)\r\n                    await this.dismiss()\r\n                    await this.login(p_form.form.value.user, p_form.form.value.password)\r\n                    await this.showToast('Bienvenido')\r\n                  }\r\n                }\r\n              });\r\n            }, async err=>{\r\n              await this.dismiss()\r\n            })\r\n          }else {\r\n              await this.showToast('El usuario ya existe')\r\n              await this.dismiss()\r\n          }\r\n        }\r\n        else{\r\n          await this.dismiss()\r\n        }\r\n      }, async err =>{\r\n        await this.dismiss()\r\n      });\r\n    }\r\n  }\r\n\r\n  async showToast(p_mensaje, p_duration=2000){\r\n    const toast = await this.toastController.create({\r\n      message: p_mensaje,\r\n      duration: p_duration\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async present() {\r\n    this.isLoading = true;\r\n    return await this.loadingController.create({\r\n      duration: 5000,\r\n    }).then(a => {\r\n      a.present().then(() => {\r\n        if (!this.isLoading) {\r\n          a.dismiss().then(() => {});\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async dismiss() {\r\n    this.isLoading = false;\r\n    return await this.loadingController.dismiss().then(() => {});\r\n  }\r\n\r\n  async login(p_usuario, p_password){\r\n    await this.present()\r\n    let id_onesignal = await this.storage.get('id_onesignal')\r\n    this.Pro_user.login(p_usuario, p_password, id_onesignal).subscribe(async resp=>{\r\n      if (resp!=null) {\r\n        if (resp.token) {\r\n          await this.storage.set('token',resp.token)\r\n          await this.dismiss()\r\n          this.Pro_router.navigate(['/home'])\r\n        }\r\n      }\r\n    }, async err=>{\r\n      await this.dismiss()\r\n    });\r\n  }\r\n\r\n  captchaResolved(response: string): void {\r\n        this.zone.run(() => {\r\n            this.captchaPassed = true;\r\n            this.captchaResponse = response;\r\n        });\r\n  }\r\n\r\n  formValid(){\r\n\r\n  }\r\n}\r\n"],"sourceRoot":""}