{"version":3,"sources":["webpack:///./src/app/Pages/pagos/pagos.module.ts","webpack:///./src/app/Pages/pagos/pagos.page.html","webpack:///./src/app/Pages/pagos/pagos.page.scss","webpack:///./src/app/Pages/pagos/pagos.page.ts"],"names":[],"mappings":"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","file":"Pages-pagos-pagos-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ComponentsModule } from '../../components/components.module';\nimport { PipesModule } from '../../Pipe/pipes.module';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PagosPage } from './pagos.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PagosPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PagosPage]\n})\nexport class PagosPageModule {}\n","module.exports = \"<app-header-in titulo=\\\"Pagos\\\"></app-header-in>\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content  pullingIcon=\\\"arrow-dropdown\\\"\\n                            pullingText=\\\"Hale para recargar\\\"\\n                            refreshingSpinner=\\\"circles\\\"\\n                            refreshingText=\\\"Recargando...\\\"></ion-refresher-content>\\n  </ion-refresher>\\n  <ion-grid>\\n    <ion-row justify-content-center>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"2\\\" size-xs=\\\"6\\\">\\n        <ion-label text-center class=\\\"restante\\\">Dias Restantes</ion-label>\\n      </ion-col>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"1\\\" size-xs=\\\"5\\\"></ion-col>\\n    </ion-row>\\n    <ion-row justify-content-center>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"1\\\" size-xs=\\\"4\\\">\\n        <ion-label class=\\\"counter\\\">{{pagos.dias_restantes}}</ion-label>\\n      </ion-col>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"2\\\" size-xs=\\\"6\\\">\\n        <ion-button color=\\\"warning\\\"\\n                    (click)=\\\"pagar()\\\"\\n                    *ngIf=\\\"es_movil\\\"\\n                    expand=\\\"full\\\">Pagar &nbsp;<ion-icon color=\\\"success\\\"\\n                                                        name=\\\"ios-cash\\\">\\n                                              </ion-icon>\\n        </ion-button>\\n        <div id=\\\"paypal-checkout-btn\\\" [hidden]=\\\"es_movil\\\"></div>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row justify-content-center>\\n      <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"4\\\" size-xs=\\\"12\\\">\\n        <ion-item color=\\\"primary\\\">\\n          <ion-item color=\\\"primary\\\">\\n            <p slot=\\\"end\\\" class=\\\"historial\\\">Historial de facturas</p>\\n          </ion-item>\\n          <ion-icon slot=\\\"end\\\" name=\\\"list-box\\\"></ion-icon>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row  justify-content-center\\n              class=\\\"row_historial\\\"\\n              *ngFor=\\\"let item of pagos.historial\\\" (click)=\\\"downloadPdf(item.id_pago)\\\">\\n      <ion-col align-self-center size-md=\\\"5\\\" size-lg=\\\"3\\\" size-xs=\\\"10\\\">\\n        <ion-label>\\n          <h2 class=\\\"id_pago\\\">{{item.id}}</h2>\\n          <h4 class=\\\"fecha_pago\\\">Fecha: {{item.fecha}}</h4>\\n        </ion-label>\\n      </ion-col>\\n      <ion-col align-self-center size-md=\\\"1\\\" size-lg=\\\"1\\\" size-xs=\\\"2\\\">\\n        <p class=\\\"monto\\\">{{item.monto | currency:\\\"USD\\\":true:\\\"1.2\\\"}}</p>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\"","module.exports = \".counter {\\n  font-size: 3.0rem;\\n  font-weight: bold;\\n  color: green; }\\n\\n.restante {\\n  font-size: 0.7rem; }\\n\\n.historial {\\n  font-size: 0.9rem;\\n  font-weight: bold; }\\n\\n.monto {\\n  font-size: 0.8rem;\\n  font-weight: bold;\\n  color: green; }\\n\\n.fecha_pago {\\n  font-size: 0.7rem; }\\n\\n.id_pago {\\n  font-size: 0.9rem;\\n  color: #3880ff !important;\\n  font-weight: bold; }\\n\\n.row_historial {\\n  border-top: solid 1px #b7b7b7; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYWJpYW4vRG9jdW1lbnRzL2JvZGVnaW4vYXBwL3NyYy9hcHAvUGFnZXMvcGFnb3MvcGFnb3MucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxpQkFBaUIsRUFBQTs7QUFHbkI7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCLEVBQUE7O0FBR25CO0VBQ0UsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxpQkFBaUIsRUFBQTs7QUFHbkI7RUFDRSxpQkFBaUI7RUFDakIseUJBQXlCO0VBQ3pCLGlCQUFpQixFQUFBOztBQUduQjtFQUNFLDZCQUE2QixFQUFBIiwiZmlsZSI6InNyYy9hcHAvUGFnZXMvcGFnb3MvcGFnb3MucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvdW50ZXJ7XG4gIGZvbnQtc2l6ZTogMy4wcmVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6IGdyZWVuO1xufVxuXG4ucmVzdGFudGV7XG4gIGZvbnQtc2l6ZTogMC43cmVtO1xufVxuXG4uaGlzdG9yaWFse1xuICBmb250LXNpemU6IDAuOXJlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5tb250b3tcbiAgZm9udC1zaXplOiAwLjhyZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogZ3JlZW47XG59XG5cbi5mZWNoYV9wYWdve1xuICBmb250LXNpemU6IDAuN3JlbTtcbn1cblxuLmlkX3BhZ297XG4gIGZvbnQtc2l6ZTogMC45cmVtO1xuICBjb2xvcjogIzM4ODBmZiAhaW1wb3J0YW50O1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnJvd19oaXN0b3JpYWx7XG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCAjYjdiN2I3O1xufVxuIl19 */\"","import { Component, OnInit, AfterViewChecked  } from '@angular/core';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal/ngx';\nimport { Storage } from '@ionic/storage';\nimport { PagosService } from '../../Services/pagos.service';\nimport { isApp } from '../../Config/configuration';\nimport { LoadingController, Platform } from '@ionic/angular';\n\n\nimport pdfMake from 'pdfmake/build/pdfmake';\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nimport { File } from '@ionic-native/file/ngx';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\n\n\ndeclare let paypal: any;\n\n@Component({\n  selector: 'app-pagos',\n  templateUrl: './pagos.page.html',\n  styleUrls: ['./pagos.page.scss'],\n})\nexport class PagosPage implements OnInit {\n\n  addScript: boolean = false;\n  monto = '0'\n  pagos = {\n    dias_restantes:0,\n    historial:[]\n  };\n  es_movil = false;\n  isLoading = false\n  pdfObj = null;\n\n  constructor(private payPal1: PayPal,\n              private Pro_pagos:PagosService,\n              private storage:Storage,\n              public loadingController: LoadingController,\n              private file: File,\n              private fileOpener: FileOpener,\n              private plt: Platform,\n            ) { }\n\n  ngOnInit() {\n    this.reload()\n    this.es_movil = isApp;\n  }\n\n  reload(){\n    this.present()\n    this.storage.get('token').then(token=>{\n      this.Pro_pagos.getPagos(token).subscribe(async data=>{\n          this.pagos = data;\n          this.monto = data.monto\n          await this.dismiss()\n      })\n    })\n  }\n\n  pagar(){\n    this.payPal1.init({\n      PayPalEnvironmentProduction: 'YOUR_PRODUCTION_CLIENT_ID',\n      PayPalEnvironmentSandbox: 'AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_'\n    }).then(() => {\n    this.payPal1.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n    })).then(() => {\n      let payment = new PayPalPayment(this.monto, 'USD', 'Description', 'sale');\n      this.payPal1.renderSinglePaymentUI(payment).then(async respose => {\n        await this.Pro_pagos.insertPago(respose, respose.response.id, this.monto)\n        this.reload();\n      }, () => {});\n      }, () => {});\n    }, () => {});\n  }\n\n  paypalConfig = {\n    env: 'sandbox',\n    client: {\n      sandbox: 'AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_',\n      production: '<your-production-key here>'\n    },\n    commit: true,\n    payment: (data, actions) => {\n      return actions.payment.create({\n        payment: {\n          transactions: [\n            { amount: { total: this.monto, currency: 'USD' } }\n          ]\n        }\n      });\n    },\n    onAuthorize: (data, actions) => {\n      return actions.payment.execute().then(async payment => {\n        await this.Pro_pagos.insertPago(payment, payment.id, this.monto)\n        this.reload();\n      })\n    }\n  };\n\n  ngAfterViewChecked(): void {\n    if (!this.addScript) {\n      this.addPaypalScript().then(() => {\n        paypal.Button.render(this.paypalConfig, '#paypal-checkout-btn');\n      })\n    }\n  }\n\n  addPaypalScript() {\n    this.addScript = true;\n    return new Promise((resolve, reject) => {\n      let scripttagElement = document.createElement('script');\n      scripttagElement.src = 'https://www.paypalobjects.com/api/checkout.js';\n      scripttagElement.onload = resolve;\n      document.body.appendChild(scripttagElement);\n    })\n  }\n\n  async doRefresh(event) {\n    this.reload()\n    event.target.complete();\n  }\n\n  async present() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      duration: 5000\n    }).then(a => {\n      a.present().then(() => {\n        if (!this.isLoading) {\n          a.dismiss().then(() => {});\n        }\n      });\n    });\n  }\n\n  async dismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => {});\n  }\n\n\n\n  //----------------------------------------------------------------------------\n  async share(id_pago){\n    let pagos = await this.Pro_pagos.getFactura(id_pago)\n\n    var docDefinition = {\n     content: [\n       { text: 'Factura', style: 'header' },\n       { text: pagos['bodegin_nombre'], alignment: 'center' },\n       { text: 'RTN: ' + pagos['bodegin_rtn'], alignment: 'center' },\n       { text: 'CAI: ' + pagos['cai'], alignment: 'center' },\n       { text: 'Direccion: ' + pagos['bodegin_direccion'], alignment: 'center' },\n       { text: 'Telefono: ' + pagos['bodegin_telefono'], alignment: 'center' },\n       { text: 'Fecha: ' + pagos['fecha'], alignment: 'left' },\n       { text: 'Cliente:' + pagos['nombre_legal'], style: 'subheader' },\n       { text: 'RTN:' + pagos['rtn'], style: 'subheader' },\n       { text: 'Numero factura:' + pagos['numero_factura'], style: 'subheader' },\n       { text: 'Detalle', style: 'subheader' },\n       { text: '', style: 'story', margin: [0, 20, 0, 20] },\n     {\n      layout: 'lightHorizontalLines', // optional\n      table: {\n        headerRows: 1,\n        widths: [ '*', 'auto', 100, '*' ],\n        body: [\n          [ 'Producto', 'Cant.', 'Precio Ant.', 'Total' ],\n          [ pagos['descripcion'],\n            '1',\n            'L. ' + pagos['monto'],\n            'L. ' + pagos['monto']\n          ],\n        ]\n      }\n    }\n     ],\n     styles: {\n       header: {\n         fontSize: 18,\n         bold: true,\n         alignment:'center'\n       },\n       subheader: {\n         fontSize: 14,\n         bold: true,\n         margin: [0, 15, 0, 0]\n       },\n       story: {\n         italic: true,\n         alignment: 'center',\n         width: '50%',\n       }\n     }\n   }\n   this.pdfObj = pdfMake.createPdf(docDefinition);\n }\n\n async downloadPdf(id_pago) {\n   await this.share(id_pago)\n   if (this.plt.is('cordova')) {\n     this.pdfObj.getBuffer((buffer) => {\n       var blob = new Blob([buffer], { type: 'application/pdf' });\n       this.file.writeFile(this.file.dataDirectory, 'mifactura.pdf', blob, { replace: true }).then(fileEntry => {\n         this.fileOpener.open(this.file.dataDirectory + 'mifactura.pdf', 'application/pdf');\n       })\n     });\n   } else {\n     this.pdfObj.download();\n   }\n }\n\n}\n"],"sourceRoot":""}