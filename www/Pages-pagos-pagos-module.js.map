{"version":3,"sources":["webpack:///./src/app/Pages/pagos/pagos.module.ts","webpack:///./src/app/Pages/pagos/pagos.page.html","webpack:///./src/app/Pages/pagos/pagos.page.scss","webpack:///./src/app/Pages/pagos/pagos.page.ts"],"names":[],"mappings":"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","file":"Pages-pagos-pagos-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { PipesModule } from '../../Pipe/pipes.module';\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PagosPage } from './pagos.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PagosPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PipesModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [PagosPage]\r\n})\r\nexport class PagosPageModule {}\r\n","module.exports = \"<app-header-in titulo=\\\"Pagos\\\"></app-header-in>\\r\\n<ion-content>\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content  pullingIcon=\\\"arrow-dropdown\\\"\\r\\n                            pullingText=\\\"Hale para recargar\\\"\\r\\n                            refreshingSpinner=\\\"circles\\\"\\r\\n                            refreshingText=\\\"Recargando...\\\"></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <ion-grid>\\r\\n    <ion-row justify-content-center>\\r\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"2\\\" size-xs=\\\"6\\\">\\r\\n        <ion-label text-center class=\\\"restante\\\">Dias Restantes</ion-label>\\r\\n      </ion-col>\\r\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"1\\\" size-xs=\\\"5\\\"></ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row justify-content-center>\\r\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"1\\\" size-xs=\\\"4\\\">\\r\\n        <ion-label class=\\\"counter\\\">{{pagos.dias_restantes}}</ion-label>\\r\\n      </ion-col>\\r\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"2\\\" size-xs=\\\"6\\\">\\r\\n        <ion-button color=\\\"warning\\\"\\r\\n                    (click)=\\\"pagar()\\\"\\r\\n                    *ngIf=\\\"es_movil\\\"\\r\\n                    expand=\\\"full\\\">Pagar &nbsp;<ion-icon color=\\\"success\\\"\\r\\n                                                        name=\\\"ios-cash\\\">\\r\\n                                              </ion-icon>\\r\\n        </ion-button>\\r\\n        <div id=\\\"paypal-checkout-btn\\\" [hidden]=\\\"es_movil\\\"></div>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row justify-content-center>\\r\\n      <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"4\\\" size-xs=\\\"12\\\">\\r\\n        <ion-item color=\\\"primary\\\">\\r\\n          <ion-item color=\\\"primary\\\">\\r\\n            <p slot=\\\"end\\\" class=\\\"historial\\\">Historial de facturas</p>\\r\\n          </ion-item>\\r\\n          <ion-icon slot=\\\"end\\\" name=\\\"list-box\\\"></ion-icon>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row  justify-content-center\\r\\n              class=\\\"row_historial\\\"\\r\\n              *ngFor=\\\"let item of pagos.historial\\\" (click)=\\\"downloadPdf(item.id_pago)\\\">\\r\\n      <ion-col align-self-center size-md=\\\"5\\\" size-lg=\\\"3\\\" size-xs=\\\"10\\\">\\r\\n        <ion-label>\\r\\n          <h2 class=\\\"id_pago\\\">{{item.id}}</h2>\\r\\n          <h4 class=\\\"fecha_pago\\\">Fecha: {{item.fecha}}</h4>\\r\\n        </ion-label>\\r\\n      </ion-col>\\r\\n      <ion-col align-self-center size-md=\\\"1\\\" size-lg=\\\"1\\\" size-xs=\\\"2\\\">\\r\\n        <p class=\\\"monto\\\">{{item.monto | currency:\\\"USD\\\":true:\\\"1.2\\\"}}</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\"","module.exports = \".counter {\\n  font-size: 3.0rem;\\n  font-weight: bold;\\n  color: green; }\\n\\n.restante {\\n  font-size: 0.7rem; }\\n\\n.historial {\\n  font-size: 0.9rem;\\n  font-weight: bold; }\\n\\n.monto {\\n  font-size: 0.8rem;\\n  font-weight: bold;\\n  color: green; }\\n\\n.fecha_pago {\\n  font-size: 0.7rem; }\\n\\n.id_pago {\\n  font-size: 0.9rem;\\n  color: #3880ff !important;\\n  font-weight: bold; }\\n\\n.row_historial {\\n  border-top: solid 1px #b7b7b7; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUGFnZXMvcGFnb3MvQzpcXFVzZXJzXFxGYWJpYW5cXERvY3VtZW50c1xcYm9kZWdpblxcYXBwQm9kZWdpbi9zcmNcXGFwcFxcUGFnZXNcXHBhZ29zXFxwYWdvcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLFlBQVksRUFBQTs7QUFHZDtFQUNFLGlCQUFpQixFQUFBOztBQUduQjtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUIsRUFBQTs7QUFHbkI7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLFlBQVksRUFBQTs7QUFHZDtFQUNFLGlCQUFpQixFQUFBOztBQUduQjtFQUNFLGlCQUFpQjtFQUNqQix5QkFBeUI7RUFDekIsaUJBQWlCLEVBQUE7O0FBR25CO0VBQ0UsNkJBQTZCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9QYWdlcy9wYWdvcy9wYWdvcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY291bnRlcntcclxuICBmb250LXNpemU6IDMuMHJlbTtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICBjb2xvcjogZ3JlZW47XHJcbn1cclxuXHJcbi5yZXN0YW50ZXtcclxuICBmb250LXNpemU6IDAuN3JlbTtcclxufVxyXG5cclxuLmhpc3RvcmlhbHtcclxuICBmb250LXNpemU6IDAuOXJlbTtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuLm1vbnRve1xyXG4gIGZvbnQtc2l6ZTogMC44cmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGNvbG9yOiBncmVlbjtcclxufVxyXG5cclxuLmZlY2hhX3BhZ297XHJcbiAgZm9udC1zaXplOiAwLjdyZW07XHJcbn1cclxuXHJcbi5pZF9wYWdve1xyXG4gIGZvbnQtc2l6ZTogMC45cmVtO1xyXG4gIGNvbG9yOiAjMzg4MGZmICFpbXBvcnRhbnQ7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi5yb3dfaGlzdG9yaWFse1xyXG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCAjYjdiN2I3O1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit, AfterViewChecked  } from '@angular/core';\r\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal/ngx';\r\nimport { Storage } from '@ionic/storage';\r\nimport { PagosService } from '../../Services/pagos.service';\r\nimport { isApp } from '../../Config/configuration';\r\nimport { LoadingController, Platform } from '@ionic/angular';\r\n\r\n\r\nimport pdfMake from 'pdfmake/build/pdfmake';\r\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\r\npdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\nimport { File } from '@ionic-native/file/ngx';\r\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\r\n\r\n\r\ndeclare let paypal: any;\r\n\r\n@Component({\r\n  selector: 'app-pagos',\r\n  templateUrl: './pagos.page.html',\r\n  styleUrls: ['./pagos.page.scss'],\r\n})\r\nexport class PagosPage implements OnInit {\r\n\r\n  addScript: boolean = false;\r\n  monto = '0'\r\n  pagos = {\r\n    dias_restantes:0,\r\n    historial:[]\r\n  };\r\n  es_movil = false;\r\n  isLoading = false\r\n  pdfObj = null;\r\n\r\n  constructor(private payPal1: PayPal,\r\n              private Pro_pagos:PagosService,\r\n              private storage:Storage,\r\n              public loadingController: LoadingController,\r\n              private file: File,\r\n              private fileOpener: FileOpener,\r\n              private plt: Platform,\r\n            ) { }\r\n\r\n  ngOnInit() {\r\n    this.reload()\r\n    this.es_movil = isApp;\r\n  }\r\n\r\n  reload(){\r\n    this.present()\r\n    this.storage.get('token').then(token=>{\r\n      this.Pro_pagos.getPagos(token).subscribe(async data=>{\r\n          this.pagos = data;\r\n          this.monto = data.monto\r\n          await this.dismiss()\r\n      })\r\n    })\r\n  }\r\n\r\n  pagar(){\r\n    this.payPal1.init({\r\n      PayPalEnvironmentProduction: 'YOUR_PRODUCTION_CLIENT_ID',\r\n      PayPalEnvironmentSandbox: 'AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_'\r\n    }).then(() => {\r\n    this.payPal1.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\r\n    })).then(() => {\r\n      let payment = new PayPalPayment(this.monto, 'USD', 'Description', 'sale');\r\n      this.payPal1.renderSinglePaymentUI(payment).then(async respose => {\r\n        await this.Pro_pagos.insertPago(respose, respose.response.id, this.monto)\r\n        this.reload();\r\n      }, () => {});\r\n      }, () => {});\r\n    }, () => {});\r\n  }\r\n\r\n  paypalConfig = {\r\n    env: 'sandbox',\r\n    client: {\r\n      sandbox: 'AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_',\r\n      production: '<your-production-key here>'\r\n    },\r\n    commit: true,\r\n    payment: (data, actions) => {\r\n      return actions.payment.create({\r\n        payment: {\r\n          transactions: [\r\n            { amount: { total: this.monto, currency: 'USD' } }\r\n          ]\r\n        }\r\n      });\r\n    },\r\n    onAuthorize: (data, actions) => {\r\n      return actions.payment.execute().then(async payment => {\r\n        await this.Pro_pagos.insertPago(payment, payment.id, this.monto)\r\n        this.reload();\r\n      })\r\n    }\r\n  };\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (!this.addScript) {\r\n      this.addPaypalScript().then(() => {\r\n        paypal.Button.render(this.paypalConfig, '#paypal-checkout-btn');\r\n      })\r\n    }\r\n  }\r\n\r\n  addPaypalScript() {\r\n    this.addScript = true;\r\n    return new Promise((resolve, reject) => {\r\n      let scripttagElement = document.createElement('script');\r\n      scripttagElement.src = 'https://www.paypalobjects.com/api/checkout.js';\r\n      scripttagElement.onload = resolve;\r\n      document.body.appendChild(scripttagElement);\r\n    })\r\n  }\r\n\r\n  async doRefresh(event) {\r\n    this.reload()\r\n    event.target.complete();\r\n  }\r\n\r\n  async present() {\r\n    this.isLoading = true;\r\n    return await this.loadingController.create({\r\n      duration: 5000\r\n    }).then(a => {\r\n      a.present().then(() => {\r\n        if (!this.isLoading) {\r\n          a.dismiss().then(() => {});\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async dismiss() {\r\n    this.isLoading = false;\r\n    return await this.loadingController.dismiss().then(() => {});\r\n  }\r\n\r\n\r\n\r\n  //----------------------------------------------------------------------------\r\n  async share(id_pago){\r\n    let pagos = await this.Pro_pagos.getFactura(id_pago)\r\n\r\n    var docDefinition = {\r\n     content: [\r\n       { text: 'Factura', style: 'header' },\r\n       { text: pagos['bodegin_nombre'], alignment: 'center' },\r\n       { text: 'RTN: ' + pagos['bodegin_rtn'], alignment: 'center' },\r\n       { text: 'CAI: ' + pagos['cai'], alignment: 'center' },\r\n       { text: 'Direccion: ' + pagos['bodegin_direccion'], alignment: 'center' },\r\n       { text: 'Telefono: ' + pagos['bodegin_telefono'], alignment: 'center' },\r\n       { text: 'Fecha: ' + pagos['fecha'], alignment: 'left' },\r\n       { text: 'Cliente:' + pagos['nombre_legal'], style: 'subheader' },\r\n       { text: 'RTN:' + pagos['rtn'], style: 'subheader' },\r\n       { text: 'Numero factura:' + pagos['numero_factura'], style: 'subheader' },\r\n       { text: 'Detalle', style: 'subheader' },\r\n       { text: '', style: 'story', margin: [0, 20, 0, 20] },\r\n     {\r\n      layout: 'lightHorizontalLines', // optional\r\n      table: {\r\n        headerRows: 1,\r\n        widths: [ '*', 'auto', 100, '*' ],\r\n        body: [\r\n          [ 'Producto', 'Cant.', 'Precio Ant.', 'Total' ],\r\n          [ pagos['descripcion'],\r\n            '1',\r\n            'L. ' + pagos['monto'],\r\n            'L. ' + pagos['monto']\r\n          ],\r\n        ]\r\n      }\r\n    }\r\n     ],\r\n     styles: {\r\n       header: {\r\n         fontSize: 18,\r\n         bold: true,\r\n         alignment:'center'\r\n       },\r\n       subheader: {\r\n         fontSize: 14,\r\n         bold: true,\r\n         margin: [0, 15, 0, 0]\r\n       },\r\n       story: {\r\n         italic: true,\r\n         alignment: 'center',\r\n         width: '50%',\r\n       }\r\n     }\r\n   }\r\n   this.pdfObj = pdfMake.createPdf(docDefinition);\r\n }\r\n\r\n async downloadPdf(id_pago) {\r\n   await this.share(id_pago)\r\n   if (this.plt.is('cordova')) {\r\n     this.pdfObj.getBuffer((buffer) => {\r\n       var blob = new Blob([buffer], { type: 'application/pdf' });\r\n       this.file.writeFile(this.file.dataDirectory, 'mifactura.pdf', blob, { replace: true }).then(fileEntry => {\r\n         this.fileOpener.open(this.file.dataDirectory + 'mifactura.pdf', 'application/pdf');\r\n       })\r\n     });\r\n   } else {\r\n     this.pdfObj.download();\r\n   }\r\n }\r\n\r\n}\r\n"],"sourceRoot":""}