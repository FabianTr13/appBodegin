{"version":3,"sources":["webpack:///./src/app/Pages/pagos/pagos.module.ts","webpack:///./src/app/Pages/pagos/pagos.page.html","webpack:///./src/app/Pages/pagos/pagos.page.scss","webpack:///./src/app/Pages/pagos/pagos.page.ts"],"names":[],"mappings":"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","file":"Pages-pagos-pagos-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ComponentsModule } from '../../components/components.module';\nimport { PipesModule } from '../../Pipe/pipes.module';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PagosPage } from './pagos.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PagosPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PagosPage]\n})\nexport class PagosPageModule {}\n","module.exports = \"<app-header-in titulo=\\\"Pagos\\\"></app-header-in>\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content  pullingIcon=\\\"arrow-dropdown\\\"\\n                            pullingText=\\\"Hale para recargar\\\"\\n                            refreshingSpinner=\\\"circles\\\"\\n                            refreshingText=\\\"Recargando...\\\"></ion-refresher-content>\\n  </ion-refresher>\\n  <ion-grid>\\n    <ion-row justify-content-center>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"2\\\" size-xs=\\\"6\\\">\\n        <ion-label text-center class=\\\"restante\\\">Dias Restantes</ion-label>\\n      </ion-col>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"1\\\" size-xs=\\\"5\\\"></ion-col>\\n    </ion-row>\\n    <ion-row justify-content-center>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"1\\\" size-xs=\\\"4\\\">\\n        <ion-label class=\\\"counter\\\">{{pagos.dias_restantes}}</ion-label>\\n      </ion-col>\\n      <ion-col align-self-center size-md=\\\"2\\\" size-lg=\\\"2\\\" size-xs=\\\"6\\\">\\n        <ion-button color=\\\"warning\\\"\\n                    (click)=\\\"pagar()\\\"\\n                    *ngIf=\\\"es_movil\\\"\\n                    expand=\\\"full\\\">Pagar &nbsp;<ion-icon color=\\\"success\\\"\\n                                                        name=\\\"ios-cash\\\">\\n                                              </ion-icon>\\n        </ion-button>\\n        <div id=\\\"paypal-checkout-btn\\\" [hidden]=\\\"es_movil\\\"></div>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row justify-content-center>\\n      <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"4\\\" size-xs=\\\"12\\\">\\n        <ion-item color=\\\"primary\\\">\\n          <ion-item color=\\\"primary\\\">\\n            <p slot=\\\"end\\\" class=\\\"historial\\\">Historial de facturas</p>\\n          </ion-item>\\n          <ion-icon slot=\\\"end\\\" name=\\\"list-box\\\"></ion-icon>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row  justify-content-center\\n              class=\\\"row_historial\\\"\\n              *ngFor=\\\"let item of pagos.historial\\\">\\n      <ion-col align-self-center size-md=\\\"5\\\" size-lg=\\\"3\\\" size-xs=\\\"10\\\">\\n        <ion-label>\\n          <h2 class=\\\"id_pago\\\">{{item.id}}</h2>\\n          <h4 class=\\\"fecha_pago\\\">Fecha: {{item.fecha}}</h4>\\n        </ion-label>\\n      </ion-col>\\n      <ion-col align-self-center size-md=\\\"1\\\" size-lg=\\\"1\\\" size-xs=\\\"2\\\">\\n        <p class=\\\"monto\\\">{{item.monto | currency:\\\"USD\\\":true:\\\"1.2\\\"}}</p>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\"","module.exports = \".counter {\\n  font-size: 3.0rem;\\n  font-weight: bold;\\n  color: green; }\\n\\n.restante {\\n  font-size: 0.7rem; }\\n\\n.historial {\\n  font-size: 0.9rem;\\n  font-weight: bold; }\\n\\n.monto {\\n  font-size: 1.0rem;\\n  font-weight: bold;\\n  color: green; }\\n\\n.fecha_pago {\\n  font-size: 0.7rem; }\\n\\n.id_pago {\\n  font-size: 0.9rem;\\n  color: #3880ff !important;\\n  font-weight: bold; }\\n\\n.row_historial {\\n  border-top: solid 1px #b7b7b7; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYWJpYW4vRG9jdW1lbnRzL2JvZGVnaW4vYXBwL3NyYy9hcHAvUGFnZXMvcGFnb3MvcGFnb3MucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxpQkFBaUIsRUFBQTs7QUFHbkI7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCLEVBQUE7O0FBR25CO0VBQ0UsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixZQUFZLEVBQUE7O0FBR2Q7RUFDRSxpQkFBaUIsRUFBQTs7QUFHbkI7RUFDRSxpQkFBaUI7RUFDakIseUJBQXlCO0VBQ3pCLGlCQUFpQixFQUFBOztBQUduQjtFQUNFLDZCQUE2QixFQUFBIiwiZmlsZSI6InNyYy9hcHAvUGFnZXMvcGFnb3MvcGFnb3MucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvdW50ZXJ7XG4gIGZvbnQtc2l6ZTogMy4wcmVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6IGdyZWVuO1xufVxuXG4ucmVzdGFudGV7XG4gIGZvbnQtc2l6ZTogMC43cmVtO1xufVxuXG4uaGlzdG9yaWFse1xuICBmb250LXNpemU6IDAuOXJlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5tb250b3tcbiAgZm9udC1zaXplOiAxLjByZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogZ3JlZW47XG59XG5cbi5mZWNoYV9wYWdve1xuICBmb250LXNpemU6IDAuN3JlbTtcbn1cblxuLmlkX3BhZ297XG4gIGZvbnQtc2l6ZTogMC45cmVtO1xuICBjb2xvcjogIzM4ODBmZiAhaW1wb3J0YW50O1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnJvd19oaXN0b3JpYWx7XG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCAjYjdiN2I3O1xufVxuIl19 */\"","import { Component, OnInit, AfterViewChecked  } from '@angular/core';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal/ngx';\nimport { Storage } from '@ionic/storage';\nimport { PagosService } from '../../Services/pagos.service';\nimport { isApp } from '../../Config/configuration';\nimport { LoadingController } from '@ionic/angular';\ndeclare let paypal: any;\n\n@Component({\n  selector: 'app-pagos',\n  templateUrl: './pagos.page.html',\n  styleUrls: ['./pagos.page.scss'],\n})\nexport class PagosPage implements OnInit {\n\n  addScript: boolean = false;\n  monto = '0'\n  pagos = {\n    dias_restantes:0,\n    historial:[]\n  };\n  es_movil = false;\n  isLoading = false\n\n  constructor(private payPal1: PayPal,\n              private Pro_pagos:PagosService,\n              private storage:Storage,\n              public loadingController: LoadingController\n            ) { }\n\n  ngOnInit() {\n    this.reload()\n    this.es_movil = isApp;\n  }\n\n  reload(){\n    this.present()\n    this.storage.get('token').then(token=>{\n      this.Pro_pagos.getPagos(token).subscribe(async data=>{\n          this.pagos = data;\n          this.monto = data.monto\n          await this.dismiss()\n      })\n    })\n  }\n\n  pagar(){\n    this.payPal1.init({\n      PayPalEnvironmentProduction: 'YOUR_PRODUCTION_CLIENT_ID',\n      PayPalEnvironmentSandbox: 'AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_'\n    }).then(() => {\n    this.payPal1.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n    })).then(() => {\n      let payment = new PayPalPayment(this.monto, 'USD', 'Description', 'sale');\n      this.payPal1.renderSinglePaymentUI(payment).then(async respose => {\n        await this.Pro_pagos.insertPago(respose, respose.response.id, this.monto)\n        this.reload();\n      }, () => {});\n      }, () => {});\n    }, () => {});\n  }\n\n  paypalConfig = {\n    env: 'sandbox',\n    client: {\n      sandbox: 'AWx9vd7DrXzsMzwbAKBkqgfY4nUDfsc-cSmtg-b2GJeGDcWJs1mtNTqdiUAakKenVMHrsqnQ1gHoCcK_',\n      production: '<your-production-key here>'\n    },\n    commit: true,\n    payment: (data, actions) => {\n      return actions.payment.create({\n        payment: {\n          transactions: [\n            { amount: { total: this.monto, currency: 'USD' } }\n          ]\n        }\n      });\n    },\n    onAuthorize: (data, actions) => {\n      return actions.payment.execute().then(async payment => {\n        await this.Pro_pagos.insertPago(payment, payment.id, this.monto)\n        this.reload();\n      })\n    }\n  };\n\n  ngAfterViewChecked(): void {\n    if (!this.addScript) {\n      this.addPaypalScript().then(() => {\n        paypal.Button.render(this.paypalConfig, '#paypal-checkout-btn');\n      })\n    }\n  }\n\n  addPaypalScript() {\n    this.addScript = true;\n    return new Promise((resolve, reject) => {\n      let scripttagElement = document.createElement('script');\n      scripttagElement.src = 'https://www.paypalobjects.com/api/checkout.js';\n      scripttagElement.onload = resolve;\n      document.body.appendChild(scripttagElement);\n    })\n  }\n\n  async doRefresh(event) {\n    this.reload()\n    event.target.complete();\n  }\n\n  async present() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      duration: 5000\n    }).then(a => {\n      a.present().then(() => {\n        if (!this.isLoading) {\n          a.dismiss().then(() => {});\n        }\n      });\n    });\n  }\n\n  async dismiss() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => {});\n  }\n}\n"],"sourceRoot":""}